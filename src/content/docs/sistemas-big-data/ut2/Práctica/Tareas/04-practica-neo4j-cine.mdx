---
title: "Práctica 4: Análisis de una Red de Películas con Neo4j"
description: "Modela y consulta una red de películas, actores y directores utilizando una base de datos de grafos para descubrir conexiones y patrones."
draft: true
---

## Escenario

Formas parte del equipo de datos de "CineConexión", una plataforma para cinéfilos que quiere ofrecer funcionalidades avanzadas para explorar las relaciones en el mundo del cine. Tu misión es modelar una pequeña parte del universo cinematográfico de ciencia ficción y escribir consultas en **Cypher**, el lenguaje de consulta de Neo4j, para responder a preguntas interesantes.

En un grafo, tenemos **Nodos** (las entidades) y **Relaciones** (cómo se conectan los nodos).

--- 

## Parte 1: Diseño del Modelo del Grafo

Primero, definamos los nodos y las relaciones que usaremos:

-   **Nodos**:
    -   `(:Pelicula {titulo: '...', anio: ...})`
    -   `(:Actor {nombre: '...'})`
    -   `(:Director {nombre: '...'})`
-   **Relaciones**:
    -   `[:ACTUO_EN]` (Un actor actúa en una película)
    -   `[:DIRIGIO]` (Un director dirige una película)

**Instrucción**: Escribe las sentencias `CREATE` en Cypher para construir el siguiente grafo de datos:

1.  **Películas**: "The Matrix" (1999), "The Matrix Reloaded" (2003), "John Wick" (2014).
2.  **Actores**: Keanu Reeves, Carrie-Anne Moss, Hugo Weaving.
3.  **Directores**: Lana Wachowski, Lilly Wachowski.
4.  **Relaciones**:
    -   Keanu Reeves actuó en las tres películas.
    -   Carrie-Anne Moss y Hugo Weaving actuaron en las dos de Matrix.
    -   Lana y Lilly Wachowski dirigieron (ambas) las dos de Matrix.

```cypher
// Tus sentencias CREATE aquí
// Ejemplo para un nodo: CREATE (:Pelicula {titulo: 'The Matrix', anio: 1999})
// Ejemplo para una relación: 
// MATCH (a:Actor {nombre: 'Keanu Reeves'}), (p:Pelicula {titulo: 'The Matrix'})
// CREATE (a)-[:ACTUO_EN]->(p)


```

--- 

## Parte 2: Consultas sobre el Grafo

Con el grafo ya creado, es hora de explorarlo. Escribe las consultas en Cypher para las siguientes preguntas.

**1. Encontrar todas las películas en las que actuó Keanu Reeves.**

```cypher
// Tu consulta aquí

```

**2. Encontrar todos los actores que actuaron en "The Matrix Reloaded".**

```cypher
// Tu consulta aquí

```

**3. ¿Quién dirigió "The Matrix"?**

```cypher
// Tu consulta aquí

```

**4. Encontrar los compañeros de reparto de Keanu Reeves.**

*Pista: Encuentra las películas en las que actuó Keanu Reeves, y luego encuentra los otros actores que actuaron en esas mismas películas. Asegúrate de excluir a Keanu Reeves de los resultados.*

```cypher
// Tu consulta de compañeros de reparto aquí

```

--- 

## Parte 3: Búsqueda de Caminos (Pathfinding)

La verdadera potencia de los grafos es encontrar rutas y conexiones complejas.

**Instrucción**: Vamos a añadir un actor más, "Laurence Fishburne", que también actuó en las dos de Matrix. Primero, escribe el `CREATE` para él y sus relaciones.

```cypher
// CREATE para Laurence Fishburne y sus relaciones

```

Ahora, escribe una consulta para encontrar la **ruta de colaboración más corta** entre Hugo Weaving y Laurence Fishburne. El resultado debería mostrar cómo están conectados (a través de qué película).

*Pista: Usa la función `shortestPath()`.*

```cypher
// Tu consulta de shortestPath aquí
MATCH 
  (actor1:Actor {nombre: 'Hugo Weaving'}),
  (actor2:Actor {nombre: 'Laurence Fishburne'}),
  p = shortestPath((actor1)-[:ACTUO_EN*]-(actor2))
RETURN p
```

*Nota: La sintaxis `[:ACTUO_EN*]` significa que puede atravesar una o más relaciones de tipo `ACTUO_EN` en cualquier dirección.*

## Instrucciones de Entrega

1.  Copia el contenido de esta página en un nuevo fichero Markdown en tu repositorio personal.
2.  Completa todos los bloques de código con las sentencias y consultas de Cypher solicitadas.
3.  Sube el fichero a tu repositorio y comparte el enlace con el profesor.