
---
title: "Solución Práctica 1: Gestión de un Catálogo de Productos con MongoDB"
description: "Solución a la práctica de diseñar y manipular una colección de productos para un e-commerce, utilizando las capacidades de modelado flexible de MongoDB."
---

## Parte 1: Diseño del modelo de datos

### Documentos Adicionales

```json
// Documento 2: Smartphone
db.productos.insertOne({
  "_id": "SKU-002",
  "nombre": "Smartphone Nexus Z",
  "marca": "TecnoÁgora Devices",
  "categoria": "Smartphones",
  "precio": 799.99,
  "stock": 50,
  "especificaciones": {
    "cpu": "Snapdragon 8 Gen 2",
    "ram": 12,
    "pantalla": "6.7 pulgadas AMOLED",
    "bateria": "5000 mAh"
  },
  "tags": ["smartphone", "12GB RAM", "5G"],
  "reviews": [
    {
      "usuario": "AnaP",
      "puntuacion": 5,
      "comentario": "La cámara es increíble."
    }
  ]
});

// Documento 3: Accesorio
db.productos.insertOne({
  "_id": "SKU-003",
  "nombre": "Auriculares Inalámbricos SoundWave",
  "marca": "AudioPhonic",
  "categoria": "Accesorios",
  "precio": 149.99,
  "stock": 120,
  "especificaciones": {
    "conectividad": "Bluetooth 5.2",
    "cancelacion_ruido": true,
    "autonomia": "24 horas"
  },
  "tags": ["audio", "bluetooth", "cancelacion de ruido"],
  "reviews": []
});
```

---

## Parte 2: Consultas sobre el catálogo

### Ejercicio 1: Encontrar portátiles de una marca con más de 8GB de RAM

```javascript
db.productos.find({
  "categoria": "Portátiles",
  "marca": "TecnoÁgora Devices",
  "especificaciones.ram": { $gt: 8 }
});
```

### Ejercicio 2: Buscar productos con la etiqueta “oferta”

```javascript
db.productos.find({
  "tags": "oferta"
});
```

### Ejercicio 3: Incrementar el stock de un producto en 10 unidades

```javascript
db.productos.updateOne(
  { "nombre": "Portátil Pro-Book X1" },
  { $inc: { "stock": 10 } }
);
```

### Ejercicio 4: Añadir una nueva reseña (review) a un producto

```javascript
db.productos.updateOne(
  { "nombre": "Portátil Pro-Book X1" },
  {
    $push: {
      "reviews": {
        "usuario": "JuanR",
        "puntuacion": 4,
        "comentario": "Muy buen producto, lo recomiendo."
      }
    }
  }
);
```

---

## Parte 3: Agregaciones

### Pipeline para calcular la puntuación media de las reseñas

```javascript
db.productos.aggregate([
  {
    $unwind: "$reviews"
  },
  {
    $group: {
      _id: "$nombre",
      puntuacion_media: { $avg: "$reviews.puntuacion" }
    }
  },
  {
    $sort: {
      puntuacion_media: -1
    }
  }
]);
```

---

## Parte 4: Ejercicios adicionales (opcional)

### 1. Mostrar productos con bajo stock

```javascript
db.productos.find({
  "stock": { $lt: 5 }
});
```

### 2. Proyección de campos específicos

```javascript
db.productos.find(
  {},
  { "nombre": 1, "precio": 1, "_id": 0 }
);
```

### 3. Eliminar un producto por su identificador

```javascript
db.productos.deleteOne({
  "_id": "SKU-001"
});
```
