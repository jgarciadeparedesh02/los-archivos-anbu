---
title: "Práctica 5: Operaciones CRUD en DynamoDB"
description: "Pon a prueba tus conocimientos diseñando y manipulando una tabla de DynamoDB desde cero. Temática: Smart City IoT."
---

import { Card, CardGrid } from '@astrojs/starlight/components';

## Contexto: La Ciudad Inteligente (Smart City)

Has sido contratado como Ingeniero de Datos para el proyecto "EcoCity". La ciudad ha desplegado miles de sensores ambientales para monitorear la calidad del aire, el ruido y la temperatura en tiempo real.

Necesitamos un sistema capaz de ingerir millones de lecturas de sensores y permitir consultas rápidas para analizar el estado de diferentes zonas de la ciudad a lo largo del tiempo. Tu misión es implementar este backend en **Amazon DynamoDB**.

---

## Requisitos del Sistema

Debes diseñar una tabla que cumpla con las siguientes especificaciones:

*   **Nombre de la Tabla:** `SensoresEcoCity`
*   **Patrón de Acceso Principal:** Necesitamos recuperar rápidamente todas las lecturas históricas de un sensor específico, ordenadas desde la más reciente a la más antigua.
*   **Datos a almacenar:**
    *   ID del Sensor (ej. `SENSOR-ZONA-Norte-01`)
    *   Timestamp de la lectura (ej. `2024-11-20T10:00:00Z`)
    *   Tipo de Medición (ej. `CO2`, `Ruido`, `Temperatura`)
    *   Valor (Numérico)
    *   Estado (ej. `OK`, `Alerta`, `Mantenimiento`)

---

## Instrucciones de la Práctica

Realiza las siguientes operaciones y documenta cada paso.

### 1. Diseño y Creación de la Tabla
Basándote en el patrón de acceso principal (histórico por sensor), decide cuáles serán tu **Partition Key** y tu **Sort Key**.
*   **Tarea:** Crea la tabla `SensoresEcoCity` con las claves elegidas.
*   **Entregable:** Captura de pantalla de la configuración de la tabla o el comando CLI utilizado.

### 2. Ingesta de Datos (Create)
Los sensores empiezan a enviar datos.
*   **Tarea:** Inserta al menos **5 lecturas** en la tabla.
    *   Simula datos de al menos **2 sensores diferentes**.
    *   Para uno de los sensores, inserta **3 lecturas** en momentos diferentes.
    *   Varía los tipos de medición (algunos de temperatura, otros de CO2).
*   **Entregable:** Captura de pantalla de los ítems creados o los comandos CLI.

### 3. Consulta de Datos (Read - Query)
Los analistas quieren ver la evolución de la temperatura del sensor `SENSOR-ZONA-Norte-01`.
*   **Tarea:** Realiza una operación **Query** (NO Scan) para obtener solo las lecturas de ese sensor específico.
*   **Entregable:** Captura del resultado de la consulta donde se vea claramente que solo aparecen los datos de ese sensor.

### 4. Actualización de Datos (Update)
Un técnico ha revisado un sensor que daba lecturas erróneas y lo ha recalibrado. Debemos marcar esa lectura antigua como "Mantenimiento".
*   **Tarea:** Modifica un ítem específico. Cambia su `Estado` a `Mantenimiento` y añade un nuevo atributo `Nota` con el texto "Recalibrado por técnico".
*   **Entregable:** Captura del ítem antes y después de la modificación, o el comando CLI usado.

### 5. Eliminación de Datos (Delete)
Una lectura fue generada por un sensor defectuoso antes de ser activado oficialmente.
*   **Tarea:** Elimina esa lectura específica de la tabla usando su clave primaria completa.
*   **Entregable:** Captura o comando demostrando la eliminación.

### 6. Reto Avanzado: Alertas Globales (Opcional)
El ayuntamiento quiere un panel que muestre *todas* las lecturas con Estado `Alerta` en toda la ciudad, sin importar de qué sensor vengan.
*   **Pregunta:** Con tu diseño actual (clave partición = ID Sensor), ¿puedes hacer esto eficientemente con un Query? ¿Por qué?
*   **Tarea:** Propón una solución técnica (GSI) para permitir esta consulta de forma eficiente.
*   **Entregable:** Breve explicación de tu solución y esquema del índice propuesto.

---

## Formato de Entrega

Debes subir a tu repositorio de tareas un fichero Markdown (`Practica5_NombreApellido.md`) que incluya:

1.  **Título y Descripción** de la práctica.
2.  **Evidencias:** Para cada paso (1-5), incluye el código/comando utilizado y/o una captura de pantalla del resultado.
3.  **Respuesta al Reto Avanzado.**
4.  **Conclusión:** Una breve reflexión sobre la idoneidad de DynamoDB para datos de IoT (Internet of Things).
