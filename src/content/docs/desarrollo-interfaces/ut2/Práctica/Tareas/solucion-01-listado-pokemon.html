<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listado de Pokémon</title>
    <!-- Tailwind CSS CDN para que los estilos funcionen en un archivo HTML plano -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold text-center mb-8">Listado de Pokémon (1-151)</h1>
        <div id="pokedex-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('pokedex-container');

            if (!container) return;

            const fetchPokemonDetails = async (url) => {
                const response = await fetch(url);
                return await response.json();
            };

            const fetchAllPokemon = async () => {
                try {
                    const response = await fetch('https://pokeapi.co/api/v2/pokemon?limit=151');
                    const data = await response.json();
                    const pokemonList = data.results;

                    const pokemonPromises = pokemonList.map(pokemon => fetchPokemonDetails(pokemon.url));
                    const allPokemonDetails = await Promise.all(pokemonPromises);

                    const typeColors = {
                        normal: 'bg-gray-400',
                        fire: 'bg-red-500',
                        water: 'bg-blue-500',
                        grass: 'bg-green-500',
                        electric: 'bg-yellow-400',
                        ice: 'bg-blue-200',
                        fighting: 'bg-red-700',
                        poison: 'bg-purple-500',
                        ground: 'bg-yellow-700',
                        flying: 'bg-indigo-400',
                        psychic: 'bg-pink-500',
                        bug: 'bg-green-700',
                        rock: 'bg-gray-600',
                        ghost: 'bg-purple-700',
                        dragon: 'bg-indigo-700',
                        steel: 'bg-gray-500',
                        fairy: 'bg-pink-300',
                        dark: 'bg-gray-800',
                        // Default para tipos desconocidos
                        default: 'bg-gray-300'
                    };

                    const pokemonHTML = allPokemonDetails
                        .sort((a, b) => a.id - b.id)
                        .map(pokemon => {
                            const typeBadges = pokemon.types.map(typeInfo => {
                                const typeName = typeInfo.type.name;
                                const colorClass = typeColors[typeName] || typeColors.default;
                                return `<span class="${colorClass} text-white text-xs font-semibold mr-1 px-2.5 py-0.5 rounded-full capitalize">${typeName}</span>`;
                            }).join('');
                            const name = pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1);

                            return `
                                <div class="border p-4 rounded-lg shadow-md hover:shadow-xl transition-shadow bg-white dark:bg-gray-800 flex flex-col items-center text-center">
                                    <img src="${pokemon.sprites.front_default}"
                                         alt="${name}"
                                         class="w-24 h-24 mx-auto transition-transform duration-200 ease-in-out hover:scale-110"
                                         onmouseover="this.src='${pokemon.sprites.back_default || pokemon.sprites.front_default}'"
                                         onmouseout="this.src='${pokemon.sprites.front_default}'">
                                    <p class="mt-2 font-bold text-lg text-gray-800 dark:text-gray-200">#${pokemon.id}</p>
                                    <h3 class="text-md font-semibold text-gray-900 dark:text-white">${name}</h3>
                                    <div class="mt-2 flex justify-center flex-wrap">${typeBadges}</div>
                                </div>
                            `;
                        })
                        .join('');

                    container.innerHTML = pokemonHTML;

                } catch (error) {
                    console.error('Error al obtener los datos de los Pokémon:', error);
                    container.innerHTML = '<p class="col-span-full text-center text-red-500">No se pudieron cargar los Pokémon. Inténtalo de nuevo más tarde.</p>';
                }
            };

            fetchAllPokemon();
        });
    </script>
</body>

</html>